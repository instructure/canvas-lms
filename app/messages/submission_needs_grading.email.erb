<%
  # For discussion checkpoints, use the parent assignment instead of the sub-assignment
  # to ensure correct assignment IDs and URLs in notifications
  assignment = asset.assignment
  assignment = assignment.parent_assignment if assignment.checkpoint? && assignment.parent_assignment
%>
<% define_content :link do %>
  <%= course_quiz_history_url(asset.quiz.context, asset.quiz, quiz_submission_id: asset.id) %>
<% end %>

<% define_content :subject do %>
  <%= t :subject, "Quiz Submitted: %{quiz}, %{context}", :quiz => assignment.title, :context => assignment.context.name %>
<% end %>

<%= t :body, "%{user_name} has completed the quiz %{quiz_title}, and it requires manual grading.", :user_name => asset.user.name, :quiz_title => asset.quiz.title %>

<%= t :submitted_date, "submitted: %{date}", :date => datetime_string(force_zone(asset.finished_at))  %>

<%= t :link_message, "You can review the submission here:" %>
<%= content :link %>
