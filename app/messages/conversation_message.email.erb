<% define_content :link do %>
  <%= root_url(protocol: 'https') + Bocce.link(asset) %>
<% end %>

<% define_content :user_name do %>
  <%= asset.author_short_name_with_shared_contexts(user) rescue t(:unknown_user, "Unknown User") %>
<% end %>

<% define_content :subject do %>
  <%= t :subject, "%{user_name} just sent you a message.", :user_name => content(:user_name) %>
<% end %>

<% define_content :footer_link do %>
  <a href="<%= content :link %>">
    <%= t :view_message, "View this conversation" %>
  </a>
<% end %>


<% if asset.conversation.subject.present? %>
  Subject: <%= asset.conversation.subject %>
<% end %>

<%= asset.body %>

<%= content :link %>

<% unless asset.attachments.empty? %>
  <%= t :attached_files, "Attached Files:" %>
  <% asset.attachments.each do |attachment| %>
    <%= attachment.display_name %> - <%= attachment.readable_size %>
    <%= file_download_url(attachment, verifier: attachment.uuid) %>
  <% end %>
<% end %>
