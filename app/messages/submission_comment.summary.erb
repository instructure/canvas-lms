<%
  # For discussion checkpoints, use the parent assignment instead of the sub-assignment
  # to ensure correct assignment IDs and URLs in notifications
  assignment = asset.submission.assignment
  assignment = assignment.parent_assignment if assignment.checkpoint? && assignment.parent_assignment
%>
<% define_content :link do %>
  <%= polymorphic_url([assignment.context, assignment, :submission], id: asset.submission.user) %>
<% end %>

<% define_content :subject do %>
  <%= t :subject, "Submission Comment: %{user}, %{assignment}, %{context}",
        :user => submission_comment_submittor(asset, user),
        :assignment => assignment.title,
        :context => assignment.context.name %>
<% end %>

<%= t :body, "%{author} just made a new comment on the submission for %{user} for %{assignment}.",
      :author => submission_comment_author(asset, user),
      :user => submission_comment_submittor(asset, user),
      :assignment => assignment.title %>
