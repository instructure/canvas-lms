!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports.ReactSelectBox=t(require("react")):e.ReactSelectBox=t(e.react)}(this,function(e){return function(e){function t(i){if(n[i])return n[i].exports;var s=n[i]={exports:{},id:i,loaded:!1};return e[i].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){e&&(e.preventDefault(),e.stopPropagation())}var s=n(1),l=s.createElement.bind(null,"div"),o=s.createElement.bind(null,"button"),a=s.createElement.bind(null,"a"),r=s.createElement.bind(null,"select"),u=s.createElement.bind(null,"option"),h=s.createElement.bind(null,"label"),c=0,d={38:"handleUpKey",40:"handleDownKey",32:"handleSpaceKey",13:"handleEnterKey",27:"handleEscKey",74:"handleDownKey",75:"handleUpKey"};e.exports=s.createClass({displayName:"exports",getInitialState:function(){return{id:"react-select-box-"+ ++c,open:!1,focusedIndex:-1,pendingValue:[]}},getDefaultProps:function(){return{closeText:"Close"}},changeOnClose:function(){return this.isMultiple()&&"true"===String(this.props.changeOnClose)},updatePendingValue:function(e,t){return this.changeOnClose()?(this.setState({pendingValue:e},t),!0):!1},componentWillMount:function(){this.updatePendingValue(this.props.value)},componentWillReceiveProps:function(e){this.updatePendingValue(e.value)},clickingOption:!1,blurTimeout:null,handleFocus:function(){clearTimeout(this.blurTimeout)},handleBlur:function(){clearTimeout(this.blurTimeout),this.blurTimeout=setTimeout(this.handleClose,0)},handleMouseDown:function(){this.clickingOption=!0},handleChange:function(e,t){return function(n){if(this.clickingOption=!1,i(n),this.isMultiple()){var s=[];if(null!=e){s=this.value().slice(0);var l=s.indexOf(e);-1!==l?s.splice(l,1):s.push(e)}this.updatePendingValue(s,t)||this.props.onChange(s)}else this.updatePendingValue(e,t)||this.props.onChange(e),this.handleClose(),this.refs.button.getDOMNode().focus()}.bind(this)},handleNativeChange:function(e){var t=e.target.value;if(this.isMultiple()){var n=[].slice.call(e.target.childNodes,0);t=n.reduce(function(e,t){return t.selected&&e.push(t.value),e},[])}this.props.onChange(t)},handleClear:function(e){i(e),this.handleChange(null,function(){this.props.onChange(this.state.pendingValue)})(e)},toggleOpenClose:function(e){return i(e),this.setState({open:!this.state.open}),this.state.open?this.setState({open:!1}):void this.handleOpen()},handleOpen:function(e){i(e),this.setState({open:!0},function(){this.refs.menu.getDOMNode().focus()})},handleClose:function(e){i(e),this.clickingOption||this.setState({open:!1,focusedIndex:-1}),this.changeOnClose()&&this.props.onChange(this.state.pendingValue)},moveFocus:function(e){var t=s.Children.count(this.props.children),n=(this.state.focusedIndex+e+t)%t;this.setState({focusedIndex:n})},handleKeyDown:function(e){d[e.which]&&this[d[e.which]](e)},handleUpKey:function(e){i(e),this.moveFocus(-1)},handleDownKey:function(e){i(e),this.state.open||this.handleOpen(e),this.moveFocus(1)},handleSpaceKey:function(e){i(e),this.state.open?-1!==this.state.focusedIndex&&this.handleEnterKey():this.handleOpen(e)},handleEnterKey:function(e){-1!==this.state.focusedIndex&&this.handleChange(this.options()[this.state.focusedIndex].value)(e)},handleEscKey:function(e){this.state.open?this.handleClose(e):this.handleClear(e)},label:function(){var e=this.options().filter(function(e){return this.isSelected(e.value)}.bind(this)).map(function(e){return e.label});return e.length>0?e.join(", "):this.props.label},isMultiple:function(){return"true"===String(this.props.multiple)},options:function(){var e=[];return s.Children.forEach(this.props.children,function(t){e.push({value:t.props.value,label:t.props.children})}),e},value:function(){var e=this.changeOnClose()?this.state.pendingValue:this.props.value;return!this.isMultiple()||Array.isArray(e)?e:null!=e?[e]:[]},hasValue:function(){return this.isMultiple()?this.value().length>0:null!=this.value()},isSelected:function(e){return this.isMultiple()?-1!==this.value().indexOf(e):this.value()===e},render:function(){var e="react-select-box-container";return this.props.className&&(e+=" "+this.props.className),this.isMultiple()&&(e+=" react-select-box-multi"),this.hasValue()||(e+=" react-select-box-empty"),l({onKeyDown:this.handleKeyDown,className:e},o({id:this.state.id,ref:"button",className:"react-select-box",onClick:this.toggleOpenClose,onBlur:this.handleBlur,tabIndex:"0","aria-hidden":!0},l({className:"react-select-box-label"},this.label())),this.renderOptionMenu(),this.renderClearButton(),this.renderNativeSelect())},renderNativeSelect:function(){var e=this.state.id+"-native-select",t=this.isMultiple(),n=t?null:u({key:"",value:""},"No Selection"),i=[n].concat(this.props.children);return l({className:"react-select-box-native"},h({htmlFor:e},this.props.label),r({id:e,multiple:t,onKeyDown:function(e){e.stopPropagation()},value:this.props.value||(t?[]:""),onChange:this.handleNativeChange},i))},renderOptionMenu:function(){var e="react-select-box-options";return this.state.open||(e+=" react-select-box-hidden"),l({className:e,onBlur:this.handleBlur,onFocus:this.handleFocus,"aria-hidden":!0,ref:"menu",tabIndex:0},l({className:"react-select-box-off-screen"},this.options().map(this.renderOption)),this.renderCloseButton())},renderOption:function(e,t){var n="react-select-box-option";return t===this.state.focusedIndex&&(n+=" react-select-box-option-focused"),this.isSelected(e.value)&&(n+=" react-select-box-option-selected"),a({id:this.state.id+"-"+t,href:"#",onClick:this.handleChange(e.value),onMouseDown:this.handleMouseDown,className:n,tabIndex:-1,key:e.value,onBlur:this.handleBlur,onFocus:this.handleFocus},e.label)},renderClearButton:function(){return this.hasValue()?o({className:"react-select-box-clear","aria-hidden":!0,onClick:this.handleClear}):void 0},renderCloseButton:function(){return this.isMultiple()&&this.props.closeText?o({onClick:this.handleClose,className:"react-select-box-close",onBlur:this.handleBlur,onFocus:this.handleFocus},this.props.closeText):void 0}})},function(t,n,i){t.exports=e}])});
//# sourceMappingURL=react-select-box.min.js.map